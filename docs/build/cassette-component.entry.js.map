{"file":"cassette-component.entry.esm.js","mappings":"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","names":[],"sources":["src/components/cassette-component/cassette-component.scss?tag=cassette-component&encapsulation=shadow","src/components/cassette-component/cassette-component.tsx"],"sourcesContent":[":host {\n  display: block;\n  height: 100%;\n  width: 100%;\n  position: relative;\n\n  .content {\n    height: 600px;\n    width: 555px;\n\n    position: relative;\n    display: flex;\n\n    .item {\n      height: 600px;\n      width: 555px;\n      position: absolute;\n    }\n\n    .track {\n      position: absolute;\n      right: 45px;\n      top: 37px;\n      padding: 4px 0;\n      font-size: 14px;\n      width: 80%;\n      text-align: center;\n      box-shadow: 3px 1px grey;\n      background: white;\n      rotate: 2deg;\n    }\n\n    .icons {\n      position: absolute;\n      bottom: 68px;\n      left: 137px;\n      scale: 0.48;\n      display: flex;\n\n      .icon {\n        cursor: pointer;\n        border: none;\n        background: none;\n        padding: 0;\n        margin: 0;\n      }\n    }\n  }\n\n  .cassette {\n    position: absolute;\n    scale: 0.68;\n    top: 105px;\n    left: 66px;\n    overflow: hidden;\n\n    .line-L {\n      width: 140px;\n      height: 47px;\n      border-bottom: 5px solid #544035;\n      position: absolute;\n      bottom: 2px;\n      left: -76px;\n      transform-origin: top right;\n    }\n\n    .line-R {\n      width: 125px;\n      height: 47px;\n      border-bottom: 5px solid #544035;\n      position: absolute;\n      bottom: 80px;\n      left: 263px;\n      transform-origin: bottom right;\n    }\n\n    &.play {\n      .disc {\n        animation: play 3s infinite linear forwards;\n      }\n      .item-L,\n      .item-R {\n        transition: rotate 0.3s linear;\n      }\n    }\n  }\n\n  .select {\n    cursor: pointer;\n  }\n\n  .items {\n    position: absolute;\n    left: 0;\n    top: 0;\n    height: 283px;\n    width: 436px;\n\n    .item-L {\n      position: absolute;\n      left: 90px;\n      top: 85px;\n      transition: rotate 0.1s linear;\n    }\n\n    .item-R {\n      position: absolute;\n      right: 90px;\n      top: 85px;\n      transition: rotate 0.1s linear;\n    }\n\n    .band-L {\n      position: absolute;\n      left: 60px;\n      top: 60px;\n      width: 130px;\n      height: 128px;\n\n      .disc {\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        left: -3px;\n        top: -6px;\n        border-radius: 100%;\n        background-color: #544035;\n      }\n    }\n\n    .band-R {\n      position: absolute;\n      left: 250px;\n      top: 60px;\n      width: 130px;\n      height: 128px;\n\n      .disc {\n        position: absolute;\n        width: 100%;\n        height: 100%;\n        left: -3px;\n        top: -6px;\n        border-radius: 100%;\n        background-color: #544035;\n      }\n    }\n\n    @keyframes play {\n      from {\n        rotate: 0deg;\n      }\n      to {\n        rotate: 360deg;\n      }\n    }\n  }\n\n  .dragable {\n    position: absolute;\n    top: 35px;\n    left: 170px;\n    width: 50px;\n    height: 100px;\n  }\n\n  .track-list {\n    position: absolute;\n    width: 370px;\n    top: 167px;\n    left: 459px;\n    background: #f5f5f4;\n    padding: 3px;\n\n    &:empty {\n      display: none;\n    }\n\n    .item {\n      margin: 2px 0;\n      &.active {\n        background-color: black;\n        color: white;\n      }\n    }\n  }\n}\n","import { Component, Host, State, getAssetPath, h } from '@stencil/core';\n\n@Component({\n  tag: 'cassette-component',\n  styleUrl: 'cassette-component.scss',\n  shadow: true,\n  assetsDirs: ['./assets'],\n})\nexport class MyComponent {\n  /**\n   * The first name\n   */\n  @State() scale: number = 1;\n\n  @State() status: 'pause' | 'play' = 'pause';\n  audioElement: any;\n\n  @State() listAudios = [];\n\n  @State() position = 0;\n\n  componentWillLoad() {}\n\n  getLocalAudio() {\n    if (this.audioElement) {\n      this.audioElement.pause();\n      this.audioElement = null;\n      this.status = 'pause';\n      this.scale = 1;\n    }\n\n    const audioFile = this.listAudios[this.position];\n    this.audioElement = new Audio(getAssetPath('./assets/music/' + audioFile));\n\n    this.audioElement.addEventListener('ended', () => {\n      this.status = 'pause';\n      this.nextAudio();\n    });\n\n    this.audioElement.addEventListener('timeupdate', () => {\n      const audioPercent = (this.audioElement.currentTime / this.audioElement.duration) * 100;\n      this.scale = 1 - audioPercent / 200;\n    });\n  }\n\n  getAudio() {\n    const ctx = new window.AudioContext();\n    if (this.audioElement?.startTimer) {\n      this.pause();\n    }\n\n    const data = this.listAudios[this.position];\n\n    const source = ctx.createBufferSource();\n\n    source.buffer = data.decodedBuffer;\n    source.connect(ctx.destination);\n\n    source.addEventListener('ended', () => {\n      const timeInSound = (new Date().getTime() - this.audioElement.startTimer) / 1000;\n      const audioPercent = (timeInSound / this.audioElement.duration) * 100;\n      if (audioPercent >= 100) {\n        this.nextAudio();\n      }\n    });\n\n    if (data.name === this.audioElement?.name) {\n      this.audioElement.source = source;\n      return;\n    }\n\n    this.audioElement = {\n      name: data.name,\n      source,\n      duration: data.decodedBuffer.duration,\n    };\n  }\n\n  interval = null;\n\n  pause() {\n    clearInterval(this.interval);\n    this.audioElement.currentTime = new Date().getTime() - this.audioElement?.startTimer;\n    this.audioElement.source.stop();\n    this.status = 'pause';\n  }\n\n  play() {\n    if (this.status === 'play') {\n      return this.pause();\n    }\n    this.getAudio();\n    if (this.audioElement.currentTime) {\n      this.audioElement.startTimer = new Date().getTime() - this.audioElement.currentTime;\n      this.audioElement.source.start(0, this.audioElement.currentTime / 1000);\n    } else {\n      this.audioElement.startTimer = new Date().getTime();\n      this.audioElement.source.start();\n    }\n\n    this.interval = setInterval(() => {\n      const timeInSound = (new Date().getTime() - this.audioElement.startTimer) / 1000;\n      const audioPercent = (timeInSound / this.audioElement.duration) * 100;\n      this.scale = 1 - audioPercent / 200;\n    }, 100);\n\n    this.status = 'play';\n  }\n\n  renderCassette() {\n    if (!this.listAudios?.length) return <div class={'cassette'}></div>;\n\n    return (\n      <div class={'cassette ' + this.status}>\n        <img class=\"main\" src={getAssetPath(`./assets/${'cassette.png'}`)}></img>\n\n        <div class=\"line-L\" style={{ rotate: `${142 - this.scale * 30}deg` }}></div>\n        <div class=\"line-R\" style={{ rotate: `${234 - 142 - this.scale * 30}deg` }}></div>\n\n        <div class=\"items\">\n          <div class=\"band-L\">\n            <div class=\"disc\" style={{ transform: `scale(${this.scale})` }}></div>\n          </div>\n          <div class=\"band-R\">\n            <div class=\"disc\" style={{ transform: `scale(${1 - this.scale + 0.5})` }}></div>\n          </div>\n\n          <img class=\"item-L\" style={{ rotate: `${this.scale * 360 * 10}deg` }} src={getAssetPath(`./assets/${'item-L.png'}`)}></img>\n          <img class=\"item-R\" style={{ rotate: `${this.scale * 360 * 10}deg` }} src={getAssetPath(`./assets/${'item-R.png'}`)}></img>\n        </div>\n        <div class=\"track\">{this.listAudios[this.position]?.name.replace(/\\.[^/.]+$/, '')}</div>\n      </div>\n    );\n  }\n\n  renderIcon(type: string, action: any) {\n    return (\n      <div class={'icon icon-' + type} onDblClick={() => action.call()}>\n        <img src={getAssetPath(`./assets/${type + '.png'}`)}></img>\n      </div>\n    );\n  }\n\n  prevAudio() {\n    this.pause();\n    this.position--;\n    if (this.position < 0) {\n      this.position = this.listAudios.length - 1;\n    }\n    this.play();\n  }\n\n  nextAudio() {\n    this.pause();\n    this.position++;\n    if (this.position >= this.listAudios.length) {\n      this.position = 0;\n    }\n    this.play();\n  }\n\n  @State() next = 'OFF';\n  @State() prev = 'OFF';\n\n  buttonSound: any;\n\n  playCassetButtonSound() {\n    if (!this.buttonSound) {\n      this.buttonSound = new Audio(getAssetPath(`./assets/${'CASSETTE-PLAYER-BUTTON-SOUND-EFFECT.mp3'}`));\n      this.buttonSound.volume = 0.3;\n    }\n    this.buttonSound.play();\n  }\n\n  selectFileOrDirectory(ev) {\n    if (ev.ctrlKey) {\n      this.manageFolders();\n    } else {\n      this.manageFiles();\n    }\n  }\n\n  async manageFiles() {\n    const ctx = new window.AudioContext();\n    const handles = await (window as any).showOpenFilePicker({\n      multiple: true,\n      types: [\n        {\n          description: 'Audio files',\n          accept: {\n            'audio/*': ['.wav', '.ogg', '.mp3', '.mp4', '.aac', '.flac', '.webm'],\n          },\n        },\n      ],\n      excludeAcceptAllOption: true,\n    });\n\n    this.activeAction = false;\n    let audiosFiles = await Promise.all(\n      handles.map(async handle => {\n        if (!this.checkFile(handle)) return;\n\n        const file = await handle.getFile();\n        const arrayBuffer = await file.arrayBuffer();\n        const decodedBuffer = await ctx.decodeAudioData(arrayBuffer);\n\n        return {\n          name: file.name,\n          decodedBuffer,\n        };\n      }),\n    );\n\n    audiosFiles = audiosFiles.filter(item => item);\n\n    if (audiosFiles.length) {\n      this.listAudios = [...this.listAudios, ...audiosFiles];\n    }\n    this.activeAction = true;\n  }\n\n  async handleDirectoryEntry(dirHandle, out) {\n    for await (const entry of dirHandle.values()) {\n      if (entry.kind === 'file') {\n        out.push(entry);\n      }\n      if (entry.kind === 'directory') {\n        const newOut = (out[entry.name] = {});\n        await this.handleDirectoryEntry(entry, newOut);\n      }\n    }\n  }\n\n  async manageFolders() {\n    const ctx = new window.AudioContext();\n    const out = [];\n    const dirHandle = await (window as any).showDirectoryPicker();\n    await this.handleDirectoryEntry(dirHandle, out);\n    console.log(out);\n\n    this.activeAction = false;\n    let audiosFiles = await Promise.all(\n      out.map(async handle => {\n        if (!this.checkFile(handle)) return;\n\n        const file = await handle.getFile();\n        const arrayBuffer = await file.arrayBuffer();\n        const decodedBuffer = await ctx.decodeAudioData(arrayBuffer);\n\n        return {\n          name: file.name,\n          decodedBuffer,\n        };\n      }),\n    );\n\n    audiosFiles = audiosFiles.filter(item => item);\n\n    if (audiosFiles.length) {\n      this.listAudios = [...this.listAudios, ...audiosFiles];\n    }\n    this.activeAction = true;\n  }\n\n  traverseFileTree(item, path) {\n    path = path || '';\n    if (!item) return;\n    if (item.isFile) {\n      // Get file\n      item.file(function (file) {\n        console.log('File:', path + file.name);\n      });\n    } else if (item.isDirectory) {\n      // Get folder contents\n      var dirReader = item.createReader();\n      dirReader.readEntries(function (entries) {\n        for (var i = 0; i < entries.length; i++) {\n          this.traverseFileTree(entries[i], path + item.name + '/');\n        }\n      });\n    }\n  }\n\n  async manageFileToAudioItem(handle) {\n    const ctx = new window.AudioContext();\n\n    let file;\n    if (!handle) return;\n    if (handle.isFile) {\n      file = await new Promise((resolve, reject) => handle.file(resolve, reject));\n      // file = handle.getFile();\n    } else {\n      file = await handle.getAsFile();\n    }\n\n    const arrayBuffer = await file.arrayBuffer();\n    const decodedBuffer = await ctx.decodeAudioData(arrayBuffer);\n\n    console.log('manageFileToAudioItem', {\n      name: file.name,\n      decodedBuffer,\n    });\n\n    return {\n      name: file.name,\n      decodedBuffer,\n    };\n  }\n\n  checkFile(file) {\n    const extensionOk = ['mp3'];\n    return extensionOk.includes(file.name.split('.').pop());\n  }\n\n  getEntries(dirReader) {\n    return new Promise(resolveOuter => {\n      dirReader.readEntries(async results => {\n        const newData = await Promise.all(\n          results.map(async (result: any) => {\n            // entries = entries.concat(Array(results));\n            if (result.isFile) {\n              if (this.checkFile(result)) {\n                // add item\n                return result;\n              }\n            } else if (result.isDirectory) {\n              const folderFiles = await this.readDirectory(result);\n              return folderFiles;\n            }\n          }),\n        );\n        // console.log('getEntries', newData);\n        resolveOuter(newData.filter(item => item).flat());\n      });\n    });\n  }\n\n  readDirectory(directory) {\n    return new Promise(async resolveOuter => {\n      let dirReader = directory.createReader();\n      const result = await this.getEntries(dirReader);\n      resolveOuter(result);\n    });\n  }\n\n  @State() activeAction = true;\n\n  async manageDropFiles(ev) {\n    // Prevent default behavior (Prevent file from being opened)\n    ev.preventDefault();\n    if (!ev.dataTransfer.items?.length) return;\n\n    this.activeAction = false;\n    console.log('Start download');\n    const allItems = [...ev.dataTransfer.items];\n\n    let audiosFiles = await Promise.all(\n      allItems.map(async handle => {\n        const item = handle.webkitGetAsEntry();\n        if (item) {\n          if (item.isFile) {\n            return await this.manageFileToAudioItem(handle);\n          } else if (item.isDirectory) {\n            const result = await this.readDirectory(item);\n            return await Promise.all((result as any).map(file => this.manageFileToAudioItem(file)));\n          }\n        }\n      }),\n    );\n\n    audiosFiles = audiosFiles.flat().filter(item => item);\n\n    if (audiosFiles.length) {\n      this.listAudios = [...this.listAudios, ...audiosFiles];\n    }\n    console.log('End download');\n\n    this.activeAction = true;\n  }\n\n  renderTrackList() {\n    return (\n      <div class=\"track-list\">\n        {this.listAudios.map(track => {\n          return <div class={`item ${this.listAudios[this.position]?.name === track?.name ? 'active' : ''}`}>{track?.name}</div>;\n        })}\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <Host>\n        <div class=\"content\" onDrop={ev => this.manageDropFiles(ev)} onDragOver={ev => ev.preventDefault()}>\n          <img class=\"item\" src={getAssetPath(`./assets/${'EMPTY.png'}`)}></img>\n\n          {this.renderCassette()}\n\n          <img class=\"item select\" src={getAssetPath(`./assets/${'PROTECTION.png'}`)} style={{ '-webkit-app-region': 'no-drag' }} onClick={ev => this.selectFileOrDirectory(ev)}></img>\n\n          <div class=\"icons\" style={{ '-webkit-app-region': 'no-drag' }}>\n            <button\n              disabled={!this.activeAction}\n              class={'icon'}\n              onClick={() => {\n                this.prev = 'OFF';\n                this.prevAudio();\n              }}\n              onMouseDown={() => {\n                this.playCassetButtonSound();\n                this.prev = 'ON';\n              }}\n            >\n              <img src={getAssetPath(`./assets/${`PREV_${this.prev}.png`}`)}></img>\n            </button>\n\n            <button\n              disabled={!this.activeAction}\n              class={'icon'}\n              onClick={() => {\n                this.play();\n              }}\n              onMouseUp={() => {\n                this.playCassetButtonSound();\n              }}\n            >\n              <img src={getAssetPath(`./assets/${`${this.status.toUpperCase()}.png`}`)}></img>\n            </button>\n\n            <button\n              disabled={!this.activeAction}\n              class={'icon'}\n              onClick={() => {\n                this.next = 'OFF';\n                this.nextAudio();\n              }}\n              onMouseDown={() => {\n                this.playCassetButtonSound();\n                this.next = 'ON';\n              }}\n            >\n              <img src={getAssetPath(`./assets/${`NEXT_${this.next}.png`}`)}></img>\n            </button>\n          </div>\n          <div class=\"dragable\" style={{ '-webkit-app-region': 'drag' }}></div>\n        </div>\n\n        {/* {this.renderTrackList()} */}\n      </Host>\n    );\n  }\n}\n"],"version":3}